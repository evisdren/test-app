refactor some utisl into a utils.ts file